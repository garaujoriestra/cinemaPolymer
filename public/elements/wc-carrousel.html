<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="wc-category-items.html">
<dom-module id="wc-carrousel">
  <template>
    <div id="wrapper-carrousel">
      <iron-ajax id="ajax"
        auto
        url="/api/subcategorias/{{nameCategoria}}"
        handle-as="json"
        on-response="load"
        debounce-duration="300"></iron-ajax>

        <div class="container flex-center-justified">
            <h1>{{nameCategoria}}</h1>
        </div>
        <div class="container flex-center-justified">
            <div class="row">
               <template
               is="dom-repeat" 
               items="{{items}}" 
               as="item">

                    <wc-category-items name="{{item.subcategoria}}">
                    </wc-category-items>
            </template>
            </div>
        </div>
    </div>
  </template>
  <script>
    HTMLImports.whenReady(function () {
      Polymer({
        is: 'wc-carrousel',
        properties: {
          items : {
              type     : Array,
              value    : function () { return []; },
              notify   : true
          },
          category : {
            type: String,
            value: "",
            observer: 'whenCategory',
            notify   : true
          },
          nameCategoria: {
            type: String,
            value: "",
            notify   : true
          }
        },
        load : function (data) {
          console.log("Lo que recibo en data ahora es :", data.detail.response.rows);
          this.items = data.detail.response.rows;
        },
        whenCategory: function(after, before){
          this.category = after;
          this.nameCategoria = after;
        }

      });
    });
  </script>
</dom-module>
